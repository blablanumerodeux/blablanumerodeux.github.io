version: 2
jobs:
  build:
    docker:
      - image: jguyomard/hugo-builder

    steps:
      - checkout

      - add_ssh_keys:
          fingerprints:
            - "32:e4:94:57:e8:e3:04:a1:65:a7:a7:49:a7:e2:e8:56"
      - run:
          name: Print
          command: |
            cd ..
            mv project me
            git clone git@github.com:blablanumerodeux/blablanumerodeux.github.io.git
            cd me
            git checkout hugo
            git submodule update --init --recursive
            hugo -d ../blablanumerodeux.github.io
            git config --global user.email "circleci@blablanumerodeux.com"
            git config --global user.name "CircleCi Job"
            cd ../blablanumerodeux.github.io
            git add -A
            git status
            git diff --cached

            git commit -m 'circleci commiting'


workflows:
  version: 2

  deploy:
    jobs:
      - hold:
          type: approval
      - build:
          filters:
            branches:
              only:
                - hugo

